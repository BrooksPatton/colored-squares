<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Colored Squares</title>
		<style media="screen">
      table {
        outline: 1px solid black;
      }

			td {
				height: 10px;
				width: 10px;
			}

			td:hover {
				background-color: brown;
			}
		</style>
	</head>
	<body>
		<table>

		</table>
		<script src="jquery-3.1.1.min.js"></script>
		<script>
			var boxes = []
			var colors = ['red', 'green', 'blue', 'purple', 'PaleGoldenRod', 'MintCream']
			var id = 0
			var size = 50
			var next
			var speed = 1

			function createBox(id) {
				var box = $('<td>')
				box.attr('id', id)
				return box
			}

			function getRandom(low, max) {
				return Math.floor(Math.random() * (max - low) + low)
			}

			function directionToMove() {
				var directions = [-50, 1, 50, -1]
				return directions[getRandom(0, 3)]
			}

			for(var i = 0; i < size; i = i + 1) {
				var tr = $('<tr>')
				tr.attr('row', i)
				$('table').append(tr)
				for(var j = 0; j < size; j = j + 1) {
					var box = createBox(id)
					id = id + 1
					tr.append(box)
				}
			}

			$('table').on('click', 'td', function() {
				$(this).css('background-color', 'blue')
				var myId = $(this).attr('id')
				var direction = directionToMove()
				var next = Number(direction) + Number(myId)

				if(next >= 0 && next <= id) {
					setTimeout(function() {
						click(next)
					}, speed)
				}
			})

			function click(next) {
				var el = $('#' + next)

				el.click()
			}
		</script>
	</body>
</html>
